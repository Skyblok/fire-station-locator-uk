
<!DOCTYPE html>
<html>
  <head>
    <title>Fire Station Locator UK</title>
    <style>
      body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
      #controls { padding: 20px; background: #f2f2f2; }
      #map { height: 80vh; width: 100%; }
    </style>
    <script>
      let map;
      const fireStations = [
        { name: "Leeds Fire Station", lat: 53.795, lng: -1.540 },
        { name: "Bradford Fire Station", lat: 53.793, lng: -1.755 },
        { name: "Sheffield Central", lat: 53.382, lng: -1.471 },
        { name: "Manchester Central", lat: 53.481, lng: -2.242 },
        { name: "Liverpool City", lat: 53.408, lng: -2.991 },
        { name: "York Fire Station", lat: 53.957, lng: -1.082 },
        { name: "Hull Central", lat: 53.744, lng: -0.345 },
        { name: "Nottingham Central", lat: 52.954, lng: -1.158 },
        { name: "Durham Fire Station", lat: 54.778, lng: -1.575 },
        { name: "Newcastle Central", lat: 54.978, lng: -1.617 },
      ];

      function initMap() {
        map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: 53.8, lng: -1.5 },
          zoom: 7,
        });
      }

      function searchStations() {
        const postcode = document.getElementById("postcode").value;
        const radiusMiles = parseInt(document.getElementById("radius").value);
        if (!postcode) return alert("Please enter a postcode");

        fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(postcode)}&key=AIzaSyCQFt030Dit0bCRw6TluHmCzOQmkZ-ISEQ`)
          .then(response => response.json())
          .then(data => {
            if (!data.results || !data.results.length) {
              alert("Postcode not found");
              return;
            }
            const location = data.results[0].geometry.location;
            const center = new google.maps.LatLng(location.lat, location.lng);
            map.setCenter(center);
            map.setZoom(10);

            const radiusMeters = radiusMiles * 1609.34;
            fireStations.forEach(station => {
              const stationLoc = new google.maps.LatLng(station.lat, station.lng);
              const distance = google.maps.geometry.spherical.computeDistanceBetween(center, stationLoc);
              if (distance <= radiusMeters) {
                new google.maps.Marker({
                  map,
                  position: stationLoc,
                  title: station.name,
                });
              }
            });
          });
      }
    </script>
  </head>
  <body>
    <div id="controls">
      <h2>Fire Station Locator UK</h2>
      <label>Enter postcode:</label>
      <input type="text" id="postcode" placeholder="e.g. LS1 1UR" />
      <br />
      <label>Search radius (miles):</label>
      <select id="radius">
        <option value="1">1 mile</option>
        <option value="5">5 miles</option>
        <option value="10" selected>10 miles</option>
        <option value="20">20 miles</option>
        <option value="50">50 miles</option>
        <option value="100">100 miles</option>
      </select>
      <button onclick="searchStations()">Search</button>
    </div>
    <div id="map"></div>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCQFt030Dit0bCRw6TluHmCzOQmkZ-ISEQ&libraries=geometry&callback=initMap" async defer></script>
  </body>
</html>
